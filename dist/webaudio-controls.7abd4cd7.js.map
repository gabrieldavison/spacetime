{"version":3,"sources":["js/engine/webaudio-controls.js"],"names":["window","customElements","styles","document","createElement","innerHTML","head","appendChild","midimenu","id","opt","useMidi","preserveMidiLearn","preserveValue","midilearn","mididump","outline","knobSrc","knobSprites","knobWidth","knobHeight","knobDiameter","knobColors","sliderSrc","sliderWidth","sliderHeight","sliderKnobSrc","sliderKnobWidth","sliderKnobHeight","sliderDitchlength","sliderColors","switchWidth","switchHeight","switchDiameter","switchColors","paramWidth","paramHeight","paramFontSize","paramColors","valuetip","xypadColors","WebAudioControlsOptions","Object","assign","WebAudioControlsWidget","HTMLElement","constructor","addEventListener","keydown","pointerdown","passive","wheel","pointerover","pointerout","contextMenu","hover","drag","body","basestyle","onblur","elem","style","onfocus","sendEvent","ev","event","createEvent","initEvent","dispatchEvent","getAttr","n","def","v","getAttribute","isNaN","showtip","d","valstr","x","c","type","toString","toUpperCase","parseFloat","toFixed","numformat","s","i","indexOf","j","length","m","r","replace","parseInt","slice","tooltip","ttframe","convValue","display","width","height","transition","opacity","visibility","rc","getBoundingClientRect","rc2","rc3","documentElement","left","top","setupLabel","labelpos","lpos","split","offs","label","position","transform","e","webAudioControlsWidgetManager","contextMenuOpen","preventDefault","stopPropagation","setMidiController","channel","cc","listeningToThisMidiController","midiController","console","log","processMidiEvent","data","controlNumber","midiMode","contextMenuClose","tagName","setValue","value","els","querySelectorAll","group","val","min","max","define","WebAudioKnob","connectedCallback","root","attachShadow","mode","childNodes","firstChild","nextSibling","enable","_src","defineProperty","get","set","setupImage","_value","redraw","defvalue","_min","_max","_step","_sprites","_width","_height","_diameter","_colors","sensitivity","conv","eval","midicc","ch","substring","lastIndexOf","midiLearnTable","ml","digits","step","_setValue","coltab","addWidget","disconnectedCallback","kw","kh","src","colors","svg","backgroundImage","btoa","backgroundSize","fireflag","img","Image","onload","sprites","ratio","Math","sp","offset","backgroundPosition","deg","round","oldvalue","f","delta","key","deltaY","shiftKey","pow","touches","changedTouches","identifier","buttons","button","focus","pointermove","lastShift","startPosX","pageX","startPosY","pageY","startVal","pointerup","removeEventListener","preventScroll","ctrlKey","metaKey","error","WebAudioSlider","knob","tracking","_knobsrc","_direction","_knobwidth","_knobheight","_ditchlength","onclick","bodyimg","knobimg","srcurl","sw","sh","svgbody","dr","mm","kw2","kh2","svgknob","knobsrcurl","knobsrc","dlen","ditchlength","sensex","sensey","pageXOffset","pageYOffset","WebAudioSwitch","invert","checked","WebAudioParam","_fontsize","paramSrc","link","rconv","currentLink","fromLink","target","bind","onchange","imgloaded","fontSize","fontsize","l","getElementById","func","color","backgroundColor","background","WebAudioKeyboard","cv","ctx","getContext","_values","_keys","press","keycodes1","keycodes2","keyup","bheight","kp","kf","ko","kn","keys","dispvalues","valuesold","rrect","y","w","h","c1","c2","g","createLinearGradient","addColorStop","fillStyle","beginPath","moveTo","lineTo","quadraticCurveTo","fill","fillRect","x0","x1","wwidth","bwidth","h2","strokeStyle","stroke","floor","k","keyCode","currentKey","sendEventFromKey","setNote","p","targetTouches","px","clientX","py","clientY","push","sort","values","sendevent","note","notes","setdispvalues","state","splice","actx","when","t","currentTime","setTimeout","WebAudioControlsWidgetManager","midiAccess","listOfWidgets","listOfExternalMidiListeners","updateWidgets","JSON","parse","localStorage","getItem","initWebAudioControls","navigator","requestMIDIAccess","then","ma","enableInputs","err","code","inputs","size","input","next","done","name","onmidimessage","handleMIDIMessage","midiConnectionStateChange","port","connection","onMIDIStarted","midi","onstatechange","addMidiListener","callback","getCurrentConfigAsJSON","currentConfig","stringify","forEach","externalListener","menu","classList","add","contextMenuCloseByKey","remove","menuItemLearn","contextMenuLearn","contextMenuClear","setItem","UseWebAudioControlsMidi","webAudioControlsMidiManager"],"mappings":"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","file":"webaudio-controls.7abd4cd7.js","sourceRoot":"../src","sourcesContent":["/* *\n *\n *  WebAudio-Controls is based on\n *    webaudio-knob by Eiji Kitamura http://google.com/+agektmr\n *    webaudio-slider by RYoya Kawai https://plus.google.com/108242669191458983485/posts\n *    webaudio-switch by Keisuke Ai http://d.hatena.ne.jp/aike/\n *  Integrated and enhanced by g200kg http://www.g200kg.com/\n *\n *\tCopyright 2013 Eiji Kitamura / Ryoya KAWAI / Keisuke Ai / g200kg(Tatsuya Shinyagaito)\n *\n *\t Licensed under the Apache License, Version 2.0 (the \"License\");\n *\t you may not use this file except in compliance with the License.\n *\t You may obtain a copy of the License at\n *\n *\t http://www.apache.org/licenses/LICENSE-2.0\n *\n *\t Unless required by applicable law or agreed to in writing, software\n *\t distributed under the License is distributed on an \"AS IS\" BASIS,\n *\t WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\t See the License for the specific language governing permissions and\n *\t limitations under the License.\n *\n * */\nif(window.customElements){\n  let styles=document.createElement(\"style\");\n  styles.innerHTML=\n`#webaudioctrl-context-menu {\n  display: none;\n  position: absolute;\n  z-index: 10;\n  padding: 0;\n  width: 100px;\n  color:#eee;\n  background-color: #268;\n  border: solid 1px #888;\n  box-shadow: 1px 1px 2px #888;\n  font-family: sans-serif;\n  font-size: 11px;\n  line-height:1.7em;\n  text-align:center;\n  cursor:pointer;\n  color:#fff;\n  list-style: none;\n}\n#webaudioctrl-context-menu.active {\n  display: block;\n}\n.webaudioctrl-context-menu__item {\n  display: block;\n  margin: 0;\n  padding: 0;\n  color: #000;\n  background-color:#eee;\n  text-decoration: none;\n}\n.webaudioctrl-context-menu__title{\n  font-weight:bold;\n}\n.webaudioctrl-context-menu__item:last-child {\n  margin-bottom: 0;\n}\n.webaudioctrl-context-menu__item:hover {\n  background-color: #b8b8b8;\n}\n`;\n  document.head.appendChild(styles);\n  let midimenu=document.createElement(\"ul\");\n  midimenu.id=\"webaudioctrl-context-menu\";\n  midimenu.innerHTML=\n`<li class=\"webaudioctrl-context-menu__title\">MIDI Learn</li>\n<li class=\"webaudioctrl-context-menu__item\" id=\"webaudioctrl-context-menu-learn\" onclick=\"webAudioControlsWidgetManager.contextMenuLearn()\">Learn</li>\n<li class=\"webaudioctrl-context-menu__item\" onclick=\"webAudioControlsWidgetManager.contextMenuClear()\">Clear</li>\n<li class=\"webaudioctrl-context-menu__item\" onclick=\"webAudioControlsWidgetManager.contextMenuClose()\">Close</li>\n`;\n  let opt={\n    useMidi:0,\n    preserveMidiLearn:0,\n    preserveValue:0,\n    midilearn:0,\n    mididump:0,\n    outline:null,\n    knobSrc:null,\n    knobSprites:null,\n    knobWidth:null,\n    knobHeight:null,\n    knobDiameter:null,\n    knobColors:\"#e00;#000;#fff\",\n    sliderSrc:null,\n    sliderWidth:null,\n    sliderHeight:null,\n    sliderKnobSrc:null,\n    sliderKnobWidth:null,\n    sliderKnobHeight:null,\n    sliderDitchlength:null,\n    sliderColors:\"#e00;#333;#fcc\",\n    switchWidth:null,\n    switchHeight:null,\n    switchDiameter:null,\n    switchColors:\"#e00;#000;#fcc\",\n    paramWidth:null,\n    paramHeight:null,\n    paramFontSize:9,\n    paramColors:\"#fff;#000\",\n    valuetip:0,\n    xypadColors:\"#e00;#000;#fcc\",\n  };\n  if(window.WebAudioControlsOptions)\n    Object.assign(opt,window.WebAudioControlsOptions);\n  class WebAudioControlsWidget extends HTMLElement{\n    constructor(){\n      super();\n      this.addEventListener(\"keydown\",this.keydown);\n      this.addEventListener(\"mousedown\",this.pointerdown,{passive:false});\n      this.addEventListener(\"touchstart\",this.pointerdown,{passive:false});\n      this.addEventListener(\"wheel\",this.wheel,{passive:false});\n      this.addEventListener(\"mouseover\",this.pointerover);\n      this.addEventListener(\"mouseout\",this.pointerout);\n      this.addEventListener(\"contextmenu\",this.contextMenu);\n      this.hover=this.drag=0;\n      document.body.appendChild(midimenu);\n      this.basestyle=`\n.webaudioctrl-tooltip{\n  display:inline-block;\n  position:absolute;\n  margin:0 -1000px;\n  z-index: 999;\n  background:#eee;\n  color:#000;\n  border:1px solid #666;\n  border-radius:4px;\n  padding:5px 10px;\n  text-align:center;\n  left:0; top:0;\n  font-size:11px;\n  opacity:0;\n  visibility:hidden;\n}\n.webaudioctrl-tooltip:before{\n  content: \"\";\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  margin-left: -8px;\n  border: 8px solid transparent;\n  border-top: 8px solid #666;\n}\n.webaudioctrl-tooltip:after{\n  content: \"\";\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  margin-left: -6px;\n  border: 6px solid transparent;\n  border-top: 6px solid #eee;\n}\n`;\n      this.onblur=()=>{\n        this.elem.style.outline=\"none\";\n      }\n      this.onfocus=()=>{\n        switch(+this.outline){\n        case null:\n        case 0:\n          this.elem.style.outline=\"none\";\n          break;\n        case 1:\n          this.elem.style.outline=\"1px solid #444\";\n          break;\n        default:\n          this.elem.style.outline=this.outline;\n        }\n      }\n    }\n    sendEvent(ev){\n      let event;\n      event=document.createEvent(\"HTMLEvents\");\n      event.initEvent(ev,false,true);\n      this.dispatchEvent(event);\n    }\n    getAttr(n,def){\n      let v=this.getAttribute(n);\n      if(v==null) return def;\n      switch(typeof(def)){\n      case \"number\":\n        if(v==\"true\") return 1;\n        v=+v;\n        if(isNaN(v)) return 0;\n        return v;\n      }\n      return v;\n    }\n    showtip(d){\n      function valstr(x,c,type){\n        switch(type){\n        case \"x\": return (x|0).toString(16);\n        case \"X\": return (x|0).toString(16).toUpperCase();\n        case \"d\": return (x|0).toString();\n        case \"f\": return parseFloat(x).toFixed(c);\n        case \"s\": return x.toString();\n        }\n        return \"\";\n      }\n      function numformat(s,x){\n        let i=s.indexOf(\"%\");\n        let j=i+1;\n        if(i<0)\n          j=s.length;\n        let c=[0,0],type=0,m=0,r=\"\";\n        if(s.indexOf(\"%s\")>=0){\n          return s.replace(\"%s\",x);\n        }\n        for(;j<s.length;++j){\n          if(\"dfxXs\".indexOf(s[j])>=0){\n            type=s[j];\n            break;\n          }\n          if(s[j]==\".\")\n            m=1;\n          else\n            c[m]=c[m]*10+parseInt(s[j]);\n        }\n        r=valstr(x,c[1],type);\n        if(c[0]>0)\n          r=(\"               \"+r).slice(-c[0]);\n        r=s.replace(/%.*[xXdfs]/,r);\n        return r;\n      }\n      let s=this.tooltip;\n      if(this.drag||this.hover){\n        if(this.valuetip){\n          if(s==null)\n            s=`%s`;\n          else if(s.indexOf(\"%\")<0)\n            s+=` : %s`;\n        }\n        if(s){\n          this.ttframe.innerHTML=numformat(s,this.convValue);\n          this.ttframe.style.display=\"inline-block\";\n          this.ttframe.style.width=\"auto\";\n          this.ttframe.style.height=\"auto\";\n          this.ttframe.style.transition=\"opacity 0.5s \"+d+\"s,visibility 0.5s \"+d+\"s\";\n          this.ttframe.style.opacity=0.9;\n          this.ttframe.style.visibility=\"visible\";\n          let rc=this.getBoundingClientRect(),rc2=this.ttframe.getBoundingClientRect(),rc3=document.documentElement.getBoundingClientRect();\n          this.ttframe.style.left=((rc.width-rc2.width)*0.5+1000)+\"px\";\n          this.ttframe.style.top=(-rc2.height-8)+\"px\";\n          return;\n        }\n      }\n      this.ttframe.style.transition=\"opacity 0.1s \"+d+\"s,visibility 0.1s \"+d+\"s\";\n      this.ttframe.style.opacity=0;\n      this.ttframe.style.visibility=\"hidden\";\n    }\n    setupLabel(){\n      this.labelpos=this.getAttr(\"labelpos\", \"bottom 0px\");\n      const lpos=this.labelpos.split(\" \");\n      let offs=\"\";\n      if(lpos.length==3)\n        offs=`translate(${lpos[1]},${lpos[2]})`;\n      this.label.style.position=\"absolute\";\n      switch(lpos[0]){\n      case \"center\":\n        this.label.style.top=\"50%\";\n        this.label.style.left=\"50%\";\n        this.label.style.transform=`translate(-50%,-50%) ${offs}`;\n        break;\n      case \"right\":\n        this.label.style.top=\"50%\";\n        this.label.style.left=\"100%\";\n        this.label.style.transform=`translateY(-50%) ${offs}`;\n        break;\n      case \"left\":\n        this.label.style.top=\"50%\";\n        this.label.style.left=\"0%\";\n        this.label.style.transform=`translate(-100%,-50%) ${offs}`;\n        break;\n      case \"bottom\":\n        this.label.style.top=\"100%\";\n        this.label.style.left=\"50%\";\n        this.label.style.transform=`translateX(-50%) ${offs}`;\n        break;\n      case \"top\":\n        this.label.style.top=\"0%\";\n        this.label.style.left=\"50%\";\n        this.label.style.transform=`translate(-50%,-100%) ${offs}`;\n        break;\n      }\n    }\n    pointerover(e) {\n      this.hover=1;\n      this.showtip(0.6);\n    }\n    pointerout(e) {\n      this.hover=0;\n      this.showtip(0);\n    }\n    contextMenu(e){\n      if(window.webAudioControlsWidgetManager && this.midilearn)\n        webAudioControlsWidgetManager.contextMenuOpen(e,this);\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    setMidiController(channel, cc) {\n      if (this.listeningToThisMidiController(channel, cc)) return;\n      this.midiController={ 'channel': channel, 'cc': cc};\n      console.log(\"Added mapping for channel=\" + channel + \" cc=\" + cc + \" tooltip=\" + this.tooltip);\n    }\n    listeningToThisMidiController(channel, cc) {\n      const c = this.midiController;\n      if((c.channel === channel || c.channel < 0) && c.cc === cc)\n        return true;\n      return false;\n    }\n    processMidiEvent(event){\n      const channel = event.data[0] & 0xf;\n      const controlNumber = event.data[1];\n      if(this.midiMode == 'learn') {\n        this.setMidiController(channel, controlNumber);\n        webAudioControlsWidgetManager.contextMenuClose();\n        this.midiMode = 'normal';\n        webAudioControlsWidgetManager.preserveMidiLearn();\n      }\n      if(this.listeningToThisMidiController(channel, controlNumber)) {\n        if(this.tagName==\"WEBAUDIO-SWITCH\"){\n          switch(this.type){\n          case \"toggle\":\n            if(event.data[2]>=64)\n              this.setValue(1-this.value,true);\n            break;\n          case \"kick\":\n            this.setValue(event.data[2]>=64?1:0);\n            break;\n          case \"radio\":\n            let els=document.querySelectorAll(\"webaudio-switch[type='radio'][group='\"+this.group+\"']\");\n            for(let i=0;i<els.length;++i){\n              if(els[i]==this)\n                els[i].setValue(1);\n              else\n                els[i].setValue(0);\n            }\n            break;\n          }\n        }\n        else{\n          const val = this.min+(this.max-this.min)*event.data[2]/127;\n          this.setValue(val, true);\n        }\n      }\n    }\n  }\n\ntry{\n    customElements.define(\"webaudio-knob\", class WebAudioKnob extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  margin:0;\n  padding:0;\n  cursor:pointer;\n  font-family: sans-serif;\n  font-size: 11px;\n}\n.webaudio-knob-body{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n  white-space:pre;\n}\n</style>\n<div class='webaudio-knob-body' tabindex='1' touch-action='none'><div class='webaudioctrl-tooltip'></div><div part=\"label\" class=\"webaudioctrl-label\"><slot></slot></div></div>\n`;\n      this.elem=root.childNodes[2];\n      this.ttframe=this.elem.firstChild;\n      this.label=this.ttframe.nextSibling;\n      this.enable=this.getAttr(\"enable\",1);\n      this._src=this.getAttr(\"src\",opt.knobSrc); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",this._value);\n      this._min=this.getAttr(\"min\",0); Object.defineProperty(this,\"min\",{get:()=>{return this._min},set:(v)=>{this._min=+v;this.redraw()}});\n      this._max=this.getAttr(\"max\",100); Object.defineProperty(this,\"max\",{get:()=>{return this._max},set:(v)=>{this._max=+v;this.redraw()}});\n      this._step=this.getAttr(\"step\",1); Object.defineProperty(this,\"step\",{get:()=>{return this._step},set:(v)=>{this._step=+v;this.redraw()}});\n      this._sprites=this.getAttr(\"sprites\",opt.knobSprites); Object.defineProperty(this,\"sprites\",{get:()=>{return this._sprites},set:(v)=>{this._sprites=v;this.setupImage()}});\n      this._width=this.getAttr(\"width\", null); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\", null); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._diameter=this.getAttr(\"diameter\", null); Object.defineProperty(this,\"diameter\",{get:()=>{return this._diameter},set:(v)=>{this._diameter=v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",opt.knobColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.setupLabel();\n      this.log=this.getAttr(\"log\",0);\n      this.sensitivity=this.getAttr(\"sensitivity\",1);\n      this.valuetip=this.getAttr(\"valuetip\",opt.valuetip);\n      this.tooltip=this.getAttr(\"tooltip\",null);\n      this.conv=this.getAttr(\"conv\",null);\n      if(this.conv){\n        const x=this._value;\n        this.convValue=eval(this.conv);\n        if(typeof(this.convValue)==\"function\")\n          this.convValue=this.convValue(x);\n      }\n      else\n        this.convValue=this._value;\n      this.midilearn=this.getAttr(\"midilearn\",opt.midilearn);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      if(this.midilearn && this.id){\n        if(webAudioControlsWidgetManager && webAudioControlsWidgetManager.midiLearnTable){\n          const ml=webAudioControlsWidgetManager.midiLearnTable;\n          for(let i=0; i < ml.length; ++i){\n            if(ml[i].id==this.id){\n              this.setMidiController(ml[i].cc.channel, ml[i].cc.cc);\n              break;\n            }\n          }\n        }\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      this._setValue(this._value);\n      this.coltab=[\"#e00\",\"#000\",\"#000\"];\n      if(window.webAudioControlsWidgetManager)\n        window.webAudioControlsWidgetManager.addWidget(this);\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.kw=this._width||this._diameter||opt.knobWidth||opt.knobDiameter;\n      this.kh=this._height||this._diameter||opt.knobHeight||opt.knobDiameter;\n      if(!this.src){\n        if(this.colors)\n          this.coltab = this.colors.split(\";\");\n        if(!this.coltab)\n          this.coltab=[\"#e00\",\"#000\",\"#000\"];\n        let svg=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"6464\" preserveAspectRatio=\"none\">\n<defs>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"0.8\" />\n  </filter>\n  <radialGradient id=\"g1\" cx=\"50%\" cy=\"10%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[2]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[1]}\"/>\n  </radialGradient>\n  <linearGradient id=\"g2\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n    <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.3\"/>\n  </linearGradient>\n  <g id=\"B\">\n    <circle cx=\"32\" cy=\"32\" r=\"31\" fill=\"#000\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"29\" fill=\"url(#g1)\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"29\" fill=\"url(#g2)\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"25\" fill=\"${this.coltab[1]}\" filter=\"url(#f1)\"/>\n    <circle cx=\"32\" cy=\"32\" r=\"29\" fill=\"url(#g2)\"/>\n  </g>\n  <line id=\"K\" x1=\"32\" y1=\"25\" x2=\"32\" y2=\"11\" stroke-linecap=\"round\" stroke-width=\"6\" stroke=\"${this.coltab[0]}\"/>\n</defs>`;\n        for(let i=0;i<101;++i){\n          svg += `<use href=\"#B\" y=\"${64*i}\"/><use href=\"#K\" y=\"${64*i}\" transform=\"rotate(${(-135+270*i/101).toFixed(2)},32,${64*i+32})\"/>`;\n        }\n        svg += \"</svg>\";\n        this.elem.style.backgroundImage = \"url(data:image/svg+xml;base64,\"+btoa(svg)+\")\";\n        if(this.kw==null) this.kw=64;\n        if(this.kh==null) this.kh=64;\n        this.elem.style.backgroundSize = `${this.kw}px ${this.kh*101}px`;\n        this.elem.style.width=this.kw+\"px\";\n        this.elem.style.height=this.kh+\"px\";\n        this.style.height=this.kh+\"px\";\n        this.fireflag=true;\n        this.redraw();\n        return;\n      }\n      else{\n        this.img=new Image();\n        this.img.onload=()=>{\n          this.elem.style.backgroundImage = \"url(\"+(this.src)+\")\";\n          if(this._sprites==null)\n            this._sprites=this.img.height/this.img.width - 1;\n          else\n            this._sprites=+this._sprites;\n          if(this.kw==null) this.kw=this.img.width;\n          if(this.kh==null) this.kh=this.img.height/(this.sprites+1);\n          if(!this.sprites)\n            this.elem.style.backgroundSize = \"100% 100%\";\n          else\n            this.elem.style.backgroundSize = `${this.kw}px ${this.kh*(this.sprites+1)}px`;\n          this.elem.style.width=this.kw+\"px\";\n          this.elem.style.height=this.kh+\"px\";\n          this.style.height=this.kh+\"px\";\n          this.redraw();\n        };\n        this.img.src=this.src;\n      }\n    }\n    redraw() {\n      let ratio;\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(this.value<this.min){\n        this.value=this.min;\n      }\n      if(this.value>this.max){\n        this.value=this.max;\n      }\n      if(this.log)\n        ratio = Math.log(this.value/this.min) / Math.log(this.max/this.min);\n      else\n        ratio = (this.value - this.min) / (this.max - this.min);\n      let style = this.elem.style;\n      let sp = this.src?this.sprites:100;\n      if(sp>=1){\n        let offset = (sp * ratio) | 0;\n        style.backgroundPosition = \"0px \" + (-offset*this.kh) + \"px\";\n        style.transform = 'rotate(0deg)';\n      } else {\n        let deg = 270 * (ratio - 0.5);\n        style.backgroundPosition=\"0px 0px\";\n        style.transform = 'rotate(' + deg + 'deg)';\n      }\n    }\n    _setValue(v){\n      if(this.step)\n        v=(Math.round((v-this.min)/this.step))*this.step+this.min;\n      this._value=Math.min(this.max,Math.max(this.min,v));\n      if(this._value!=this.oldvalue){\n        this.fireflag=true;\n        this.oldvalue=this._value;\n        if(this.conv){\n          const x=this._value;\n          this.convValue=eval(this.conv);\n          if(typeof(this.convValue)==\"function\")\n            this.convValue=this.convValue(x);\n        }\n        else\n          this.convValue=this._value;\n        if(typeof(this.convValue)==\"number\"){\n          this.convValue=this.convValue.toFixed(this.digits);\n        }\n        this.redraw();\n        this.showtip(0);\n        return 1;\n      }\n      return 0;\n    }\n    setValue(v,f){\n      if(this._setValue(v) && f)\n        this.sendEvent(\"input\"),this.sendEvent(\"change\");\n    }\n    keydown(e){\n      const delta = this.step;\n      if(delta==0)\n        delta=1;\n      switch(e.key){\n      case \"ArrowUp\":\n        this.setValue(this.value+delta,true);\n        break;\n      case \"ArrowDown\":\n        this.setValue(this.value-delta,true);\n        break;\n      default:\n          return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    wheel(e) {\n      if (!this.enable)\n        return;\n      if(this.log){\n        let r=Math.log(this.value/this.min)/Math.log(this.max/this.min);\n        let d = (e.deltaY>0?-0.01:0.01);\n        if(!e.shiftKey)\n          d*=5;\n        r += d;\n        this.setValue(this.min*Math.pow(this.max/this.min,r),true);\n      }\n      else{\n        let delta=Math.max(this.step, (this.max-this.min)*0.05);\n        if(e.shiftKey)\n          delta=this.step?this.step:1;\n        delta=e.deltaY>0?-delta:delta;\n        this.setValue(+this.value+delta,true);\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches){\n        e = ev.changedTouches[0];\n        this.identifier=e.identifier;\n      }\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.drag=1;\n      this.showtip(0);\n      this.oldvalue=this._value;\n      let pointermove=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;i<ev.touches.length;++i){\n            if(ev.touches[i].identifier==this.identifier){\n              e = ev.touches[i];\n              break;\n            }\n          }\n        }\n        if(this.lastShift !== e.shiftKey) {\n          this.lastShift = e.shiftKey;\n          this.startPosX = e.pageX;\n          this.startPosY = e.pageY;\n          this.startVal = this.value;\n        }\n        let offset = (this.startPosY - e.pageY - this.startPosX + e.pageX) * this.sensitivity;\n        if(this.log){\n          let r = Math.log(this.startVal / this.min) / Math.log(this.max / this.min);\n          r += offset/((e.shiftKey?4:1)*128);\n          if(r<0) r=0;\n          if(r>1) r=1;\n          this._setValue(this.min * Math.pow(this.max/this.min, r));\n        }\n        else{\n          this._setValue(this.min + ((((this.startVal + (this.max - this.min) * offset / ((e.shiftKey ? 4 : 1) * 128)) - this.min) / this.step) | 0) * this.step);\n        }\n        if(this.fireflag){\n          this.sendEvent(\"input\");\n          this.fireflag=false;\n        }\n        if(e.preventDefault)\n          e.preventDefault();\n        if(e.stopPropagation)\n          e.stopPropagation();\n        return false;\n      }\n      let pointerup=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;;){\n            if(ev.changedTouches[i].identifier==this.identifier){\n              break;\n            }\n            if(++i>=ev.changedTouches.length)\n              return;\n          }\n        }\n        this.drag=0;\n        this.showtip(0);\n        this.startPosX = this.startPosY = null;\n        window.removeEventListener('mousemove', pointermove);\n        window.removeEventListener('touchmove', pointermove, {passive:false});\n        window.removeEventListener('mouseup', pointerup);\n        window.removeEventListener('touchend', pointerup);\n        window.removeEventListener('touchcancel', pointerup);\n        document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n        this.sendEvent(\"change\");\n      }\n      let preventScroll=(e)=>{\n        e.preventDefault();\n      }\n      if(e.ctrlKey || e.metaKey)\n        this.setValue(this.defvalue,true);\n      else {\n        this.startPosX = e.pageX;\n        this.startPosY = e.pageY;\n        this.startVal = this.value;\n        window.addEventListener('mousemove', pointermove);\n        window.addEventListener('touchmove', pointermove, {passive:false});\n      }\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      ev.preventDefault();\n      ev.stopPropagation();\n      return false;\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-knob already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-slider\", class WebAudioSlider extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 11px;\n  cursor:pointer;\n}\n.webaudio-slider-body{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n  white-space:pre;\n}\n.webaudio-slider-knob{\n  display:inline-block;\n  position:absolute;\n  margin:0;\n  padding:0;\n}\n</style>\n<div class='webaudio-slider-body' tabindex='1' touch-action='none'><div class='webaudio-slider-knob' touch-action='none'></div><div class='webaudioctrl-tooltip'></div><div part=\"label\" class=\"webaudioctrl-label\"><slot></slot></div></div>\n`;\n      this.elem=root.childNodes[2];\n      this.knob=this.elem.firstChild;\n      this.ttframe=this.knob.nextSibling;\n      this.label=this.ttframe.nextSibling;\n      this.enable=this.getAttr(\"enable\",1);\n      this.tracking=this.getAttr(\"tracking\",\"rel\"); \n      this._src=this.getAttr(\"src\",opt.sliderSrc); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this._knobsrc=this.getAttr(\"knobsrc\",opt.sliderKnobSrc); Object.defineProperty(this,\"knobsrc\",{get:()=>{return this._knobsrc},set:(v)=>{this._knobsrc=v;this.setupImage()}});\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",this._value);\n      this._min=this.getAttr(\"min\",0); Object.defineProperty(this,\"min\",{get:()=>{return this._min},set:(v)=>{this._min=v;this.redraw()}});\n      this._max=this.getAttr(\"max\",100); Object.defineProperty(this,\"max\",{get:()=>{return this._max},set:(v)=>{this._max=v;this.redraw()}});\n      this._step=this.getAttr(\"step\",1); Object.defineProperty(this,\"step\",{get:()=>{return this._step},set:(v)=>{this._step=v;this.redraw()}});\n      this._sprites=this.getAttr(\"sprites\",0); Object.defineProperty(this,\"sprites\",{get:()=>{return this._sprites},set:(v)=>{this._sprites=v;this.setupImage()}});\n      this._direction=this.getAttr(\"direction\",null); Object.defineProperty(this,\"direction\",{get:()=>{return this._direction},set:(v)=>{this._direction=v;this.setupImage()}});\n      this.log=this.getAttr(\"log\",0);\n      this._width=this.getAttr(\"width\",opt.sliderWidth); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",opt.sliderHeight); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._knobwidth=this.getAttr(\"knobwidth\",opt.sliderKnobWidth); Object.defineProperty(this,\"knobwidth\",{get:()=>{return this._knobwidth},set:(v)=>{this._knobwidth=v;this.setupImage()}});\n      this._knobheight=this.getAttr(\"knobheight\",opt.sliderKnobHeight); Object.defineProperty(this,\"knobheight\",{get:()=>{return this._knobheight},set:(v)=>{this._knobheight=v;this.setupImage()}});\n      this._ditchlength=this.getAttr(\"ditchlength\",opt.sliderDitchlength); Object.defineProperty(this,\"ditchlength\",{get:()=>{return this._ditchlength},set:(v)=>{this._ditchlength=v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",opt.sliderColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.setupLabel();\n      this.sensitivity=this.getAttr(\"sensitivity\",1);\n      this.valuetip=this.getAttr(\"valuetip\",opt.valuetip);\n      this.tooltip=this.getAttr(\"tooltip\",null);\n      this.conv=this.getAttr(\"conv\",null);\n      if(this.conv){\n        const x=this._value;\n        this.convValue=eval(this.conv);\n        if(typeof(this.convValue)==\"function\")\n          this.convValue=this.convValue(x);\n      }\n      else\n        this.convValue=this._value;\n      this.midilearn=this.getAttr(\"midilearn\",opt.midilearn);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      if(this.midilearn && this.id){\n        if(webAudioControlsWidgetManager && webAudioControlsWidgetManager.midiLearnTable){\n          const ml=webAudioControlsWidgetManager.midiLearnTable;\n          for(let i=0; i < ml.length; ++i){\n            if(ml[i].id==this.id){\n              this.setMidiController(ml[i].cc.channel, ml[i].cc.cc);\n              break;\n            }\n          }\n        }\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      this.fireflag=true;\n      if(window.webAudioControlsWidgetManager)\n//        window.webAudioControlsWidgetManager.updateWidgets();\n        window.webAudioControlsWidgetManager.addWidget(this);\n      this.elem.onclick=(e)=>{e.stopPropagation()};\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.coltab = this.colors.split(\";\");\n      this.bodyimg=new Image();\n      this.knobimg=new Image();\n      this.srcurl=null;\n      if(this.src==null||this.src==\"\"){\n        this.sw=+this._width;\n        this.sh=+this.height;\n        if(this._direction==\"horz\"){\n          if(this._width==null) this.sw=128;\n          if(this._height==null) this.sh=24;\n        }\n        else if(this._direction==\"vert\"){\n          if(this._width==null) this.sw=24;\n          if(this._height==null) this.sh=128;\n        }\n        else{\n          if(this._width==null) this.sw=128;\n          if(this._height==null) this.sh=24;\n        }\n        const r=Math.min(this.sw,this.sh)*0.5;\n        const svgbody=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${this.sw}\" height=\"${this.sh}\" preserveAspectRatio=\"none\">\n<defs>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"0.8\" />\n  </filter>\n  <linearGradient id=\"g1\" x1=\"0%\" y1=\"0%\" ${(this.sw>this.sh)?'x2=\"0%\" y2=\"100%\"':'x2=\"100%\" y2=\"0%\"'}>\n    <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n    <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.3\"/>\n  </linearGradient>\n</defs>\n<rect x=\"1\" y=\"1\" rx=\"${r}\" ry=\"${r}\" width=\"${this.sw-2}\" height=\"${this.sh-2}\" fill=\"#000\"/>\n<rect x=\"3\" y=\"3\" rx=\"${r}\" ry=\"${r}\" width=\"${this.sw-6}\" height=\"${this.sh-6}\" fill=\"${this.coltab[1]}\" filter=\"url(#f1)\"/>\n<rect x=\"1\" y=\"1\" rx=\"${r}\" ry=\"${r}\" width=\"${this.sw-2}\" height=\"${this.sh-2}\" fill=\"url(#g1)\"/>\n</svg>`;\n        this.srcurl = \"data:image/svg+xml;base64,\"+btoa(svgbody);\n      }\n      else{\n        this.srcurl = this.src;\n      }\n      this.bodyimg.onload=()=>{\n        if(this.src!=\"\")\n          this.elem.style.backgroundImage = \"url(\"+this.srcurl+\")\";\n        this.sw=+this._width;\n        this.sh=+this._height;\n        if(this._width==null) this.sw=this.bodyimg.width;\n        if(this._height==null) this.sh=this.bodyimg.height;\n        if(this.dr==null){\n          if(this.sw>this.sh)\n            this.dr=\"horz\";\n          else\n            this.dr=\"vert\";\n        }\n        this.kw=+this._knobwidth;\n        this.kh=+this._knobheight;\n        if(this._knobsrc==null){\n          if(this._knobwidth==null) this.kw=Math.min(this.sw,this.sh);\n          if(this._knobheight==null) this.kh=Math.min(this.sw,this.sh);\n          const mm=Math.min(this.kw,this.kh)*0.5;\n          const kw2=Math.max(1,this.kw-12);\n          const kh2=Math.max(1,this.kh-12);\n          const svgknob=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${this.kw}\" height=\"${this.kh}\" preserveAspectRatio=\"none\">\n<defs>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"0.8\" />\n  </filter>\n  <linearGradient id=\"g1\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[2]}\"/>\n    <stop offset=\"50%\" stop-color=\"${this.coltab[0]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[0]}\" stop-opacity=\"0.5\"/>\n  </linearGradient>\n  <linearGradient id=\"g2\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[0]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[0]}\"/>\n  </linearGradient>\n  <linearGradient id=\"g3\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n    <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n    <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.3\"/>\n  </linearGradient>\n</defs>\n<rect x=\"2\" y=\"2\" width=\"${this.kw-4}\" height=\"${this.kh-4}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"#000\"/>\n<rect x=\"3\" y=\"3\" width=\"${this.kw-6}\" height=\"${this.kh-6}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"url(#g1)\"/>\n<rect x=\"6\" y=\"6\" width=\"${kw2}\" height=\"${kh2}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"url(#g2)\" filter=\"url(#f1)\"/>\n<rect x=\"3\" y=\"3\" width=\"${this.kw-6}\" height=\"${this.kh-6}\" rx=\"${mm}\" ry=\"${mm}\" fill=\"url(#g3)\"/>\n</svg>`;\n          this.knobsrcurl = \"data:image/svg+xml;base64,\"+btoa(svgknob);\n        }\n        else{\n          this.knobsrcurl = this.knobsrc;\n        }\n        this.knobimg.onload=()=>{\n          this.knob.style.backgroundImage = \"url(\"+this.knobsrcurl+\")\";\n          if(this._knobwidth==null) this.kw=this.knobimg.width;\n          if(this._knobheight==null) this.kh=this.knobimg.height;\n          this.dlen=this.ditchlength;\n          if(this.dlen==null){\n            if(this.dr==\"horz\")\n              this.dlen=this.sw-this.kw;\n            else\n              this.dlen=this.sh-this.kh;\n          }\n          this.knob.style.backgroundSize = \"100% 100%\";\n          this.knob.style.width = this.kw+\"px\";\n          this.knob.style.height = this.kh+\"px\";\n          this.elem.style.backgroundSize = \"100% 100%\";\n          this.elem.style.width=this.sw+\"px\";\n          this.elem.style.height=this.sh+\"px\";\n          this.redraw();\n        };\n        this.knobimg.src=this.knobsrcurl;\n      };\n      this.bodyimg.src=this.srcurl;\n    }\n    redraw() {\n      let ratio;\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(this.value<this.min){\n        this.value=this.min;\n      }\n      if(this.value>this.max){\n        this.value=this.max;\n      }\n      if(this.log)\n        ratio = Math.log(this.value/this.min) / Math.log(this.max/this.min);\n      else\n        ratio = (this.value - this.min) / (this.max - this.min);\n      let style = this.knob.style;\n      if(this.dr==\"horz\"){\n        style.top=(this.sh-this.kh)*0.5+\"px\";\n        style.left=((this.sw-this.kw-this.dlen)*0.5+ratio*this.dlen)+\"px\";\n        this.sensex=1; this.sensey=0;\n      }\n      else{\n        style.left=(this.sw-this.kw)*0.5+\"px\";\n        style.top=((this.sh-this.kh-this.dlen)*0.5+(1-ratio)*this.dlen)+\"px\";\n        this.sensex=0; this.sensey=1;\n      }\n    }\n    _setValue(v){\n      v=(Math.round((v-this.min)/this.step))*this.step+this.min;\n      this._value=Math.min(this.max,Math.max(this.min,v));\n      if(this._value!=this.oldvalue){\n        this.oldvalue=this._value;\n        this.fireflag=true;\n        if(this.conv){\n          const x=this._value;\n          this.convValue=eval(this.conv);\n          if(typeof(this.convValue)==\"function\")\n            this.convValue=this.convValue(x);\n        }\n        else\n          this.convValue=this._value;\n        if(typeof(this.convValue)==\"number\"){\n          this.convValue=this.convValue.toFixed(this.digits);\n        }\n        this.redraw();\n        this.showtip(0);\n        return 1;\n      }\n      return 0;\n    }\n    setValue(v,f){\n      if(this._setValue(v)&&f)\n        this.sendEvent(\"input\"),this.sendEvent(\"change\");\n    }\n    keydown(e){\n      const delta = this.step;\n      if(delta==0)\n        delta=1;\n      switch(e.key){\n      case \"ArrowUp\":\n        this.setValue(this.value+delta,true);\n        break;\n      case \"ArrowDown\":\n        this.setValue(this.value-delta,true);\n        break;\n      default:\n          return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    wheel(e) {\n      if (!this.enable)\n        return;\n      if(this.log){\n        let r=Math.log(this.value/this.min)/Math.log(this.max/this.min);\n        let d = (e.deltaY>0?-0.01:0.01);\n        if(!e.shiftKey)\n          d*=5;\n        r += d;\n        this.setValue(this.min*Math.pow(this.max/this.min,r),true);\n      }\n      else{\n        let delta=Math.max(this.step, (this.max-this.min)*0.05);\n        if(e.shiftKey)\n          delta=this.step?this.step:1;\n        delta=e.deltaY>0?-delta:delta;\n        this.setValue(+this.value+delta,true);\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches){\n        e = ev.changedTouches[0];\n        this.identifier=e.identifier;\n      }\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.drag=1;\n      this.showtip(0);\n      let pointermove=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;i<ev.touches.length;++i){\n            if(ev.touches[i].identifier==this.identifier){\n              e = ev.touches[i];\n              break;\n            }\n          }\n        }\n        if(this.lastShift !== e.shiftKey) {\n          this.lastShift = e.shiftKey;\n          this.startPosX = e.pageX;\n          this.startPosY = e.pageY;\n          this.startVal = this.value;\n        }\n        if(this.tracking==\"abs\"){\n          const rc = this.getBoundingClientRect();\n          let val;\n          if(this.dr==\"horz\")\n            val = Math.max(0,Math.min(1,(e.pageX-rc.left-window.pageXOffset-this.kw*0.5)/(this.width-this.kw)));\n          else\n            val = 1 - Math.max(0,Math.min(1,(e.pageY-rc.top-window.pageYOffset-this.kh*0.5)/(this.height-this.kh)));\n          if(this.log){\n            this._setValue(this.min * Math.pow(this.max/this.min, val));\n          }\n          else\n            this._setValue(this.min + (this.max - this.min)*val);\n        }\n        else{\n          let offset = ((this.startPosY - e.pageY)*this.sensey - (this.startPosX - e.pageX)*this.sensex) * this.sensitivity;\n          if(this.log){\n            let r = Math.log(this.startVal / this.min) / Math.log(this.max / this.min);\n            r += offset/((e.shiftKey?4:1)*128);\n            if(r<0) r=0;\n            if(r>1) r=1;\n            this._setValue(this.min * Math.pow(this.max/this.min, r));\n          }\n          else{\n            this._setValue(this.min + ((((this.startVal + (this.max - this.min) * offset / ((e.shiftKey ? 4 : 1) * this.dlen)) - this.min) / this.step) | 0) * this.step);\n          }\n        }\n        if(this.fireflag){\n          this.sendEvent(\"input\");\n          this.fireflag=false;\n        }\n        if(e.preventDefault)\n          e.preventDefault();\n        if(e.stopPropagation)\n          e.stopPropagation();\n        return false;\n      }\n      let pointerup=(ev)=>{\n        let e=ev;\n        if(ev.touches){\n          for(let i=0;;){\n            if(ev.changedTouches[i].identifier==this.identifier){\n              break;\n            }\n            if(++i>=ev.changedTouches.length)\n              return;\n          }\n        }\n        this.drag=0;\n        this.showtip(0);\n        this.startPosX = this.startPosY = null;\n        window.removeEventListener('mousemove', pointermove);\n        window.removeEventListener('touchmove', pointermove, {passive:false});\n        window.removeEventListener('mouseup', pointerup);\n        window.removeEventListener('touchend', pointerup);\n        window.removeEventListener('touchcancel', pointerup);\n        document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n        this.sendEvent(\"change\");\n      }\n      let preventScroll=(e)=>{\n        e.preventDefault();\n      }\n      if(e.touches)\n        e = e.touches[0];\n      if(e.ctrlKey || e.metaKey)\n        this.setValue(this.defvalue,true);\n      else {\n        this.startPosX = e.pageX;\n        this.startPosY = e.pageY;\n        this.startVal = this.value;\n        window.addEventListener('mousemove', pointermove);\n        window.addEventListener('touchmove', pointermove, {passive:false});\n        pointermove(ev);\n      }\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-slider already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-switch\", class WebAudioSwitch extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 11px;\n  cursor:pointer;\n}\n.webaudio-switch-body{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n  white-space:pre;\n}\n.webaudioctrl-label{\n  position:absolute;\n  left:50%;\n  top:50%;\n}\n</style>\n<div class='webaudio-switch-body' tabindex='1' touch-action='none'><div class='webaudioctrl-tooltip'></div><div part=\"label\" class=\"webaudioctrl-label\"><slot></slot></div></div>\n`;\n      this.elem=root.childNodes[2];\n      this.ttframe=this.elem.firstChild;\n      this.label=this.ttframe.nextSibling;\n      this.enable=this.getAttr(\"enable\",1);\n      this._src=this.getAttr(\"src\",null); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",this._value);\n      this.type=this.getAttr(\"type\",\"toggle\");\n      this.group=this.getAttr(\"group\",\"\");\n      this._width=this.getAttr(\"width\",null); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",null); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._diameter=this.getAttr(\"diameter\",null); Object.defineProperty(this,\"diameter\",{get:()=>{return this._diameter},set:(v)=>{this._diameter=v;this.setupImage()}});\n      this.invert=this.getAttr(\"invert\",0);\n      this._colors=this.getAttr(\"colors\",opt.switchColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.setupLabel();\n      this.valuetip=0;\n      this.tooltip=this.getAttr(\"tooltip\",null);\n      this.midilearn=this.getAttr(\"midilearn\",opt.midilearn);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      if(this.midilearn && this.id){\n        if(webAudioControlsWidgetManager && webAudioControlsWidgetManager.midiLearnTable){\n          const ml=webAudioControlsWidgetManager.midiLearnTable;\n          for(let i=0; i < ml.length; ++i){\n            if(ml[i].id==this.id){\n              this.setMidiController(ml[i].cc.channel, ml[i].cc.cc);\n              break;\n            }\n          }\n        }\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(window.webAudioControlsWidgetManager)\n//        window.webAudioControlsWidgetManager.updateWidgets();\n        window.webAudioControlsWidgetManager.addWidget(this);\n      this.elem.onclick=(e)=>{e.stopPropagation()};\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.coltab = this.colors.split(\";\");\n      this.kw=this._width||this._diameter||opt.switchWidth||opt.switchDiameter;\n      this.kh=this._height||this._diameter||opt.switchHeight||opt.switchDiameter;\n      this.img=new Image();\n      this.srcurl=null;\n      if(this.src==null||this.src==\"\"){\n        if(this.kw==null) this.kw=32;\n        if(this.kh==null) this.kh=32;\n        const mm=Math.min(this.kw,this.kh);\n        const kw=this.kw,kh=this.kh;\n        const svg=\n`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${this.kw}\" height=\"${this.kh*2}\" preserveAspectRatio=\"none\">\n<defs>\n<linearGradient id=\"g1\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n  <stop offset=\"0%\" stop-color=\"#000\" stop-opacity=\"0\"/>\n  <stop offset=\"100%\" stop-color=\"#000\" stop-opacity=\"0.2\"/>\n</linearGradient>\n<radialGradient id=\"g2\" cx=\"50%\" cy=\"30%\">\n    <stop offset=\"0%\" stop-color=\"${this.coltab[2]}\"/>\n    <stop offset=\"100%\" stop-color=\"${this.coltab[0]}\"/>\n  </radialGradient>\n  <filter id=\"f1\">\n    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\".4\" />\n  </filter>\n</defs>\n<g id=\"p1\">\n  <rect x=\"${kw*.075}\" y=\"${kh*.075}\" width=\"${kw*.85}\" height=\"${kh*.85}\" rx=\"${mm*.1}\" ry=\"${mm*.1}\" fill=\"#000\"/>\n  <rect x=\"${kw*.1}\" y=\"${kh*.1}\" width=\"${kw*.8}\" height=\"${kh*.8}\" rx=\"${mm*.1}\" ry=\"${mm*.1}\" fill=\"${this.coltab[1]}\"/>\n</g>\n<g id=\"p2\">\n  <circle cx=\"${kw*0.5}\" cy=\"${kh*0.5}\" r=\"${mm*0.35}\" stroke=\"#000\" stroke-width=\"${mm*.03}\" fill=\"${this.coltab[0]}\" filter=\"url(#f1)\"/>\n  <circle cx=\"${kw*0.5}\" cy=\"${kh*0.5}\" r=\"${mm*0.27}\" stroke=\"#000\" stroke-width=\"${mm*.03}\" fill=\"#000\" filter=\"url(#f1)\"/>\n  <rect x=\"${kw*.075}\" y=\"${kh*.075}\" width=\"${kw*.85}\" height=\"${kh*.85}\" rx=\"${mm*.1}\" ry=\"${mm*.1}\" fill=\"url(#g1)\"/>\n</g>\n<use href=\"#p1\" y=\"${kh}\"/>\n<use href=\"#p2\" y=\"${kh}\"/>\n<circle cx=\"${kw*.5}\" cy=\"${kh*1.5}\" r=\"${mm*.25}\" fill=\"url(#g2)\" filter=\"url(#f1)\"/>\n<circle cx=\"${kw*.5}\" cy=\"${kh*1.5}\" r=\"${mm*.25}\" fill=\"url(#g1)\"/>\n</svg>`;\n        this.srcurl=\"data:image/svg+xml;base64,\"+btoa(svg);\n      }\n      else\n        this.srcurl=this.src;\n      this.img.onload=()=>{\n        if(this.kw==null) this.kw=this.img.width;\n        if(this.kh==null) this.kh=this.img.height*0.5;\n        this.elem.style.backgroundImage = \"url(\"+this.srcurl+\")\";\n        this.elem.style.backgroundSize = \"100% 200%\";\n        this.elem.style.width=this.kw+\"px\";\n        this.elem.style.height=this.kh+\"px\";\n        this.redraw();\n      }\n      this.img.src=this.srcurl;\n    }\n    redraw() {\n      let style = this.elem.style;\n      if(this.value^this.invert)\n        style.backgroundPosition = \"0px -100%\";\n      else\n        style.backgroundPosition = \"0px 0px\";\n    }\n    setValue(v,f){\n      this.value=v;\n      this.checked=(!!v);\n      if(this.value!=this.oldvalue){\n        this.redraw();\n        this.showtip(0);\n        if(f){\n          this.sendEvent(\"input\");\n          this.sendEvent(\"change\");\n        }\n        this.oldvalue=this.value;\n      }\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches){\n        e = ev.changedTouches[0];\n        this.identifier=e.identifier;\n      }\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.drag=1;\n      this.showtip(0);\n      let pointermove=(e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n      let pointerup=(e)=>{\n        this.drag=0;\n        this.showtip(0);\n        window.removeEventListener('mousemove', pointermove);\n        window.removeEventListener('touchmove', pointermove, {passive:false});\n        window.removeEventListener('mouseup', pointerup);\n        window.removeEventListener('touchend', pointerup);\n        window.removeEventListener('touchcancel', pointerup);\n        document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n        if(this.type==\"kick\"){\n          this.value=0;\n          this.checked=false;\n          this.redraw();\n          this.sendEvent(\"change\");\n        }\n        this.sendEvent(\"click\");\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      let preventScroll=(e)=>{\n        e.preventDefault();\n      }\n      switch(this.type){\n      case \"kick\":\n        this.setValue(1);\n        this.sendEvent(\"change\");\n        break;\n      case \"toggle\":\n        if(e.ctrlKey || e.metaKey)\n          this.value=defvalue;\n        else\n          this.value=1-this.value;\n        this.checked=!!this.value;\n        this.sendEvent(\"change\");\n        break;\n      case \"radio\":\n        let els=document.querySelectorAll(\"webaudio-switch[type='radio'][group='\"+this.group+\"']\");\n        for(let i=0;i<els.length;++i){\n          if(els[i]==this)\n            els[i].setValue(1);\n          else\n            els[i].setValue(0);\n        }\n        this.sendEvent(\"change\");\n        break;\n      }\n\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      this.redraw();\n      ev.preventDefault();\n      ev.stopPropagation();\n      return false;\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-switch already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-param\", class WebAudioParam extends WebAudioControlsWidget {\n    constructor(){\n      super();\n      this.addEventListener(\"keydown\",this.keydown);\n      this.addEventListener(\"mousedown\",this.pointerdown,{passive:false});\n      this.addEventListener(\"touchstart\",this.pointerdown,{passive:false});\n      this.addEventListener(\"wheel\",this.wheel);\n      this.addEventListener(\"mouseover\",this.pointerover);\n      this.addEventListener(\"mouseout\",this.pointerout);\n      this.addEventListener(\"contextmenu\",this.contextMenu);\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  user-select:none;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 8px;\n  cursor:pointer;\n  position:relative;\n  vertical-align:baseline;\n}\n.webaudio-param-body{\n  display:inline-block;\n  position:relative;\n  text-align:center;\n  background:none;\n  margin:0;\n  padding:0;\n  font-family:sans-serif;\n  font-size:11px;\n  vertical-align:bottom;\n  border:none;\n}\n</style>\n<input class='webaudio-param-body' value='0' tabindex='1' touch-action='none'/><div class='webaudioctrl-tooltip'></div>\n`;\n      this.elem=root.childNodes[2];\n      this.ttframe=root.childNodes[3];\n      this.enable=this.getAttr(\"enable\",1);\n      this._value=this.getAttr(\"value\",0); Object.defineProperty(this,\"value\",{get:()=>{return this._value},set:(v)=>{this._value=v;this.redraw()}});\n      this.defvalue=this.getAttr(\"defvalue\",0);\n      this._fontsize=this.getAttr(\"fontsize\",9); Object.defineProperty(this,\"fontsize\",{get:()=>{return this._fontsize},set:(v)=>{this._fontsize=v;this.setupImage()}});\n      this._src=this.getAttr(\"src\",opt.paramSrc); Object.defineProperty(this,\"src\",{get:()=>{return this._src},set:(v)=>{this._src=v;this.setupImage()}});\n      this.link=this.getAttr(\"link\",\"\");\n      this._width=this.getAttr(\"width\",opt.paramWidth); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",opt.paramHeight); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",opt.paramColors); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.rconv=this.getAttr(\"rconv\",null);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      this.currentLink=null;\n      if(this.midicc) {\n        let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n        let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n        this.setMidiController(ch, cc);\n      }\n      this.setupImage();\n      if(window.webAudioControlsWidgetManager)\n//        window.webAudioControlsWidgetManager.updateWidgets();\n        window.webAudioControlsWidgetManager.addWidget(this);\n      this.fromLink=((e)=>{\n        this.setValue(e.target.convValue.toFixed(e.target.digits));\n      }).bind(this);\n      this.elem.onchange=()=>{\n        if(!this.currentLink.target.conv || (this.currentLink.target.conv&&this.rconv)){\n          let val = this.value=this.elem.value;\n          if(this.rconv){\n            let x=+this.elem.value;\n            val=eval(this.rconv);\n          }\n          if(this.currentLink){\n            this.currentLink.target.setValue(val, true);\n          }\n        }\n      }\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.imgloaded=()=>{\n        if(this.src!=\"\"&&this.src!=null){\n          this.elem.style.backgroundImage = \"url(\"+this.src+\")\";\n          this.elem.style.backgroundSize = \"100% 100%\";\n          if(this._width==null) this._width=this.img.width;\n          if(this._height==null) this._height=this.img.height;\n        }\n        else{\n          if(this._width==null) this._width=32;\n          if(this._height==null) this._height=20;\n        }\n        this.elem.style.width=this._width+\"px\";\n        this.elem.style.height=this._height+\"px\";\n        this.elem.style.fontSize=this.fontsize+\"px\";\n        let l=document.getElementById(this.link);\n        if(l&&typeof(l.value)!=\"undefined\"){\n          if(typeof(l.convValue)==\"number\")\n            this.setValue(l.convValue.toFixed(l.digits));\n          else\n            this.setValue(l.convValue);\n          if(this.currentLink)\n            this.currentLink.removeEventListener(\"input\",this.currentLink.func);\n          this.currentLink={target:l, func:(e)=>{\n            if(typeof(l.convValue)==\"number\")\n              this.setValue(l.convValue.toFixed(l.digits));\n            else\n              this.setValue(l.convValue);\n          }};\n          this.currentLink.target.addEventListener(\"input\",this.currentLink.func);\n  //        l.addEventListener(\"input\",(e)=>{this.setValue(l.convValue.toFixed(l.digits))});\n        }\n        this.redraw();\n      };\n      this.coltab = this.colors.split(\";\");\n      this.elem.style.color=this.coltab[0];\n      this.img=new Image();\n      this.img.onload=this.imgloaded.bind();\n      if(this.src==null){\n        this.elem.style.backgroundColor=this.coltab[1];\n        this.imgloaded();\n      }\n      else if(this.src==\"\"){\n        this.elem.style.background=\"none\";\n        this.imgloaded();\n      }\n      else{\n        this.img.src=this.src;\n      }\n    }\n    redraw() {\n      this.elem.value=this.value;\n    }\n    setValue(v,f){\n      this.value=v;\n      if(this.value!=this.oldvalue){\n        this.redraw();\n        this.showtip(0);\n        if(f){\n          let event=document.createEvent(\"HTMLEvents\");\n          event.initEvent(\"change\",false,true);\n          this.dispatchEvent(event);\n        }\n        this.oldvalue=this.value;\n      }\n    }\n    pointerdown(ev){\n      if(!this.enable)\n        return;\n      let e=ev;\n      if(ev.touches)\n          e = ev.touches[0];\n      else {\n        if(e.buttons!=1 && e.button!=0)\n          return;\n      }\n      this.elem.focus();\n      this.redraw();\n    }\n  });\n} catch(error){\n  console.log(\"webaudio-param already defined\");\n}\n\ntry{\n  customElements.define(\"webaudio-keyboard\", class WebAudioKeyboard extends WebAudioControlsWidget {\n    constructor(){\n      super();\n    }\n    connectedCallback(){\n      let root;\n      if(this.attachShadow)\n        root=this.attachShadow({mode: 'open'});\n      else\n        root=this;\n      root.innerHTML=\n`<style>\n${this.basestyle}\n:host{\n  display:inline-block;\n  position:relative;\n  margin:0;\n  padding:0;\n  font-family: sans-serif;\n  font-size: 11px;\n}\n.webaudio-keyboard-body{\n  display:inline-block;\n  margin:0;\n  padding:0;\n  vertical-align:bottom;\n}\n</style>\n<canvas class='webaudio-keyboard-body' tabindex='1' touch-action='none'></canvas><div class='webauioctrl-tooltip'></div>\n`;\n      this.elem=this.cv=root.childNodes[2];\n      this.ttframe=root.childNodes[3];\n      this.ctx=this.cv.getContext(\"2d\");\n      this._values=[];\n      this.enable=this.getAttr(\"enable\",1);\n      this._width=this.getAttr(\"width\",480); Object.defineProperty(this,\"width\",{get:()=>{return this._width},set:(v)=>{this._width=v;this.setupImage()}});\n      this._height=this.getAttr(\"height\",128); Object.defineProperty(this,\"height\",{get:()=>{return this._height},set:(v)=>{this._height=v;this.setupImage()}});\n      this._min=this.getAttr(\"min\",0); Object.defineProperty(this,\"min\",{get:()=>{return this._min},set:(v)=>{this._min=+v;this.redraw()}});\n      this._keys=this.getAttr(\"keys\",25); Object.defineProperty(this,\"keys\",{get:()=>{return this._keys},set:(v)=>{this._keys=+v;this.setupImage()}});\n      this._colors=this.getAttr(\"colors\",\"#222;#eee;#ccc;#333;#000;#e88;#c44;#c33;#800\"); Object.defineProperty(this,\"colors\",{get:()=>{return this._colors},set:(v)=>{this._colors=v;this.setupImage()}});\n      this.outline=this.getAttr(\"outline\",opt.outline);\n      this.midilearn=this.getAttr(\"midilearn\",0);\n      this.midicc=this.getAttr(\"midicc\",null);\n      this.press=0;\n      this.keycodes1=[90,83,88,68,67,86,71,66,72,78,74,77,188,76,190,187,191,226];\n      this.keycodes2=[81,50,87,51,69,82,53,84,54,89,55,85,73,57,79,48,80,192,222,219];\n      this.addEventListener(\"keyup\",this.keyup);\n      this.midiController={};\n      this.midiMode=\"normal\";\n      if(this.midicc) {\n          let ch = parseInt(this.midicc.substring(0, this.midicc.lastIndexOf(\".\"))) - 1;\n          let cc = parseInt(this.midicc.substring(this.midicc.lastIndexOf(\".\") + 1));\n          this.setMidiController(ch, cc);\n      }\n      this.setupImage();\n      this.digits=0;\n      if(this.step && this.step < 1) {\n        for(let n = this.step ; n < 1; n *= 10)\n          ++this.digits;\n      }\n      if(window.webAudioControlsWidgetManager)\n        window.webAudioControlsWidgetManager.addWidget(this);\n    }\n    disconnectedCallback(){}\n    setupImage(){\n      this.cv.style.width=this.width+\"px\";\n      this.cv.style.height=this.height+\"px\";\n      this.bheight = this.height * 0.55;\n      this.kp=[0,7/12,1,3*7/12,2,3,6*7/12,4,8*7/12,5,10*7/12,6];\n      this.kf=[0,1,0,1,0,0,1,0,1,0,1,0];\n      this.ko=[0,0,(7*2)/12-1,0,(7*4)/12-2,(7*5)/12-3,0,(7*7)/12-4,0,(7*9)/12-5,0,(7*11)/12-6];\n      this.kn=[0,2,4,5,7,9,11];\n      this.coltab=this.colors.split(\";\");\n      this.cv.width = this.width;\n      this.cv.height = this.height;\n      this.cv.style.width = this.width+'px';\n      this.cv.style.height = this.height+'px';\n      this.style.height = this.height+'px';\n      this.cv.style.outline=this.outline?\"\":\"none\";\n      this.bheight = this.height * 0.55;\n      this.max=this.min+this.keys-1;\n      this.dispvalues=[];\n      this.valuesold=[];\n      if(this.kf[this.min%12])\n        --this.min;\n      if(this.kf[this.max%12])\n        ++this.max;\n      this.redraw();\n    }\n    redraw(){\n      function rrect(ctx, x, y, w, h, r, c1, c2) {\n        if(c2) {\n          let g=ctx.createLinearGradient(x,y,x+w,y);\n          g.addColorStop(0,c1);\n          g.addColorStop(1,c2);\n          ctx.fillStyle=g;\n        }\n        else\n          ctx.fillStyle=c1;\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(x+w, y);\n        ctx.lineTo(x+w, y+h-r);\n        ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);\n        ctx.lineTo(x+r, y+h);\n        ctx.quadraticCurveTo(x, y+h, x, y+h-r);\n        ctx.lineTo(x, y);\n        ctx.fill();\n      }\n      this.ctx.fillStyle = this.coltab[0];\n      this.ctx.fillRect(0,0,this.width,this.height);\n      let x0=7*((this.min/12)|0)+this.kp[this.min%12];\n      let x1=7*((this.max/12)|0)+this.kp[this.max%12];\n      let n=x1-x0;\n      this.wwidth=(this.width-1)/(n+1);\n      this.bwidth=this.wwidth*7/12;\n      let h2=this.bheight;\n      let r=Math.min(8,this.wwidth*0.2);\n      for(let i=this.min,j=0;i<=this.max;++i) {\n        if(this.kf[i%12]==0) {\n          let x=this.wwidth*(j++)+1;\n          if(this.dispvalues.indexOf(i)>=0)\n            rrect(this.ctx,x,1,this.wwidth-1,this.height-2,r,this.coltab[5],this.coltab[6]);\n          else\n            rrect(this.ctx,x,1,this.wwidth-1,this.height-2,r,this.coltab[1],this.coltab[2]);\n        }\n      }\n      r=Math.min(8,this.bwidth*0.3);\n      for(let i=this.min;i<this.max;++i) {\n        if(this.kf[i%12]) {\n          let x=this.wwidth*this.ko[this.min%12]+this.bwidth*(i-this.min)+1;\n          if(this.dispvalues.indexOf(i)>=0)\n            rrect(this.ctx,x,1,this.bwidth,h2,r,this.coltab[7],this.coltab[8]);\n          else\n            rrect(this.ctx,x,1,this.bwidth,h2,r,this.coltab[3],this.coltab[4]);\n          this.ctx.strokeStyle=this.coltab[0];\n          this.ctx.stroke();\n        }\n      }\n    }\n    _setValue(v){\n      if(this.step)\n        v=(Math.round((v-this.min)/this.step))*this.step+this.min;\n      this._value=Math.min(this.max,Math.max(this.min,v));\n      if(this._value!=this.oldvalue){\n        this.oldvalue=this._value;\n        this.redraw();\n        this.showtip(0);\n        return 1;\n      }\n      return 0;\n    }\n    setValue(v,f){\n      if(this._setValue(v) && f)\n        this.sendEvent(\"input\"),this.sendEvent(\"change\");\n    }\n    wheel(e){}\n    keydown(e){\n      let m=Math.floor((this.min+11)/12)*12;\n      let k=this.keycodes1.indexOf(e.keyCode);\n      if(k<0) {\n        k=this.keycodes2.indexOf(e.keyCode);\n        if(k>=0) k+=12;\n      }\n      if(k>=0){\n        k+=m;\n        if(this.currentKey!=k){\n          this.currentKey=k;\n          this.sendEventFromKey(1,k);\n          this.setNote(1,k);\n        }\n      }\n    }\n    keyup(e){\n      let m=Math.floor((this.min+11)/12)*12;\n      let k=this.keycodes1.indexOf(e.keyCode);\n      if(k<0) {\n        k=this.keycodes2.indexOf(e.keyCode);\n        if(k>=0) k+=12;\n      }\n      if(k>=0){\n        k+=m;\n        this.currentKey=-1;\n        this.sendEventFromKey(0,k);\n        this.setNote(0,k);\n      }\n    }\n    pointerdown(ev){\n      this.cv.focus();\n      if(this.enable) {\n        ++this.press;\n      }\n      let pointermove=(ev)=>{\n        if(!this.enable)\n          return;\n        let r=this.getBoundingClientRect();\n        let v=[],p;\n        if(ev.touches)\n          p=ev.targetTouches;\n        else if(this.press)\n          p=[ev];\n        else\n          p=[];\n        if(p.length>0)\n          this.drag=1;\n        for(let i=0;i<p.length;++i) {\n          let px=p[i].clientX-r.left;\n          let py=p[i].clientY-r.top;\n          let x,k,ko;\n          if(py>=0&&py<this.height){\n            if(py<this.bheight) {\n              x=px-this.wwidth*this.ko[this.min%12];\n              k=this.min+((x/this.bwidth)|0);\n            }\n            else {\n              k=(px/this.wwidth)|0;\n              ko=this.kp[this.min%12];\n              k+=ko;\n              k=this.min+((k/7)|0)*12+this.kn[k%7]-this.kn[ko%7];\n            }\n            if(k>=this.min&&k<=this.max)\n              v.push(k);\n          }\n        }\n        v.sort();\n        this.values=v;\n        this.sendevent();\n        this.redraw();\n      }\n        \n      let pointerup=(ev)=>{\n        if(this.enable) {\n          if(ev.touches)\n            this.press=ev.touches.length;\n          else\n            this.press=0;\n          pointermove(ev);\n          this.sendevent();\n          if(this.press==0){\n            window.removeEventListener('mousemove', pointermove);\n            window.removeEventListener('touchmove', pointermove, {passive:false});\n            window.removeEventListener('mouseup', pointerup);\n            window.removeEventListener('touchend', pointerup);\n            window.removeEventListener('touchcancel', pointerup);\n            document.body.removeEventListener('touchstart', preventScroll,{passive:false});\n          }\n          this.redraw();\n        }\n        this.drag=0;\n        ev.preventDefault();\n      }\n      let preventScroll=(ev)=>{\n        ev.preventDefault();\n      }\n      window.addEventListener('mousemove', pointermove);\n      window.addEventListener('touchmove', pointermove, {passive:false});\n      window.addEventListener('mouseup', pointerup);\n      window.addEventListener('touchend', pointerup);\n      window.addEventListener('touchcancel', pointerup);\n      document.body.addEventListener('touchstart', preventScroll,{passive:false});\n      pointermove(ev);\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n    sendEventFromKey(s,k){\n      let ev=document.createEvent('HTMLEvents');\n      ev.initEvent('change',true,true);\n      ev.note=[s,k];\n      this.dispatchEvent(ev);\n    }\n    sendevent(){\n      let notes=[];\n      for(let i=0,j=this.valuesold.length;i<j;++i) {\n        if(this.values.indexOf(this.valuesold[i])<0)\n          notes.push([0,this.valuesold[i]]);\n      }\n      for(let i=0,j=this.values.length;i<j;++i) {\n        if(this.valuesold.indexOf(this.values[i])<0)\n          notes.push([1,this.values[i]]);\n      }\n      if(notes.length) {\n        this.valuesold=this.values;\n        for(let i=0;i<notes.length;++i) {\n          this.setdispvalues(notes[i][0],notes[i][1]);\n          let ev=document.createEvent('HTMLEvents');\n          ev.initEvent('change',true,true);\n          ev.note=notes[i];\n          this.dispatchEvent(ev);\n        }\n      }\n    }\n    setdispvalues(state,note) {\n      let n=this.dispvalues.indexOf(note);\n      if(state) {\n        if(n<0) this.dispvalues.push(note);\n      }\n      else {\n        if(n>=0) this.dispvalues.splice(n,1);\n      }\n    }\n    setNote(state,note,actx,when) {\n      const t=(actx&&when-actx.currentTime);\n      if(t>0){\n        setTimeout(()=>{this.setNote(state,note)},t*1000);\n      }\n      else{\n        this.setdispvalues(state,note);\n        this.redraw();\n      }\n    }  });\n} catch(error){\n  console.log(\"webaudio-keyboard already defined\");\n}\n\n  class WebAudioControlsWidgetManager {\n    constructor(){\n      this.midiAccess = null;\n      this.listOfWidgets = [];\n      this.listOfExternalMidiListeners = [];\n      this.updateWidgets();\n      if(opt.preserveMidiLearn)\n        this.midiLearnTable=JSON.parse(localStorage.getItem(\"WebAudioControlsMidiLearn\"));\n      else\n        this.midiLearnTable=null;\n      this.initWebAudioControls();\n    }\n    addWidget(w){\n      this.listOfWidgets.push(w);\n    }\n    updateWidgets(){\n//      this.listOfWidgets = document.querySelectorAll(\"webaudio-knob,webaudio-slider,webaudio-switch\");\n    }\n    initWebAudioControls() {\n      if(navigator.requestMIDIAccess) {\n        navigator.requestMIDIAccess().then(\n          (ma)=>{this.midiAccess = ma,this.enableInputs()},\n          (err)=>{ console.log(\"MIDI not initialized - error encountered:\" + err.code)}\n        );\n      }\n    }\n    enableInputs() {\n      let inputs = this.midiAccess.inputs.values();\n      console.log(\"Found \" + this.midiAccess.inputs.size + \" MIDI input(s)\");\n      for(let input = inputs.next(); input && !input.done; input = inputs.next()) {\n        console.log(\"Connected input: \" + input.value.name);\n        input.value.onmidimessage = this.handleMIDIMessage.bind(this);\n      }\n    }\n    midiConnectionStateChange(e) {\n      console.log(\"connection: \" + e.port.name + \" \" + e.port.connection + \" \" + e.port.state);\n      enableInputs();\n    }\n\n    onMIDIStarted(midi) {\n      this.midiAccess = midi;\n      midi.onstatechange = this.midiConnectionStateChange;\n      enableInputs(midi);\n    }\n    // Add hooks for external midi listeners support\n    addMidiListener(callback) {\n      this.listOfExternalMidiListeners.push(callback);\n    }\n    getCurrentConfigAsJSON() {\n      return currentConfig.stringify();\n    }\n    handleMIDIMessage(event) {\n      this.listOfExternalMidiListeners.forEach(function (externalListener) {\n        externalListener(event);\n      });\n      if(((event.data[0] & 0xf0) == 0xf0) || ((event.data[0] & 0xf0) == 0xb0 && event.data[1] >= 120))\n        return;\n      for(let w of this.listOfWidgets) {\n        if(w.processMidiEvent)\n          w.processMidiEvent(event);\n      }\n      if(opt.mididump)\n        console.log(event.data);\n    }\n    contextMenuOpen(e,knob){\n      if(!this.midiAccess)\n        return;\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      menu.style.left=e.pageX+\"px\";\n      menu.style.top=e.pageY+\"px\";\n      menu.knob=knob;\n      menu.classList.add(\"active\");\n      menu.knob.focus();\n      menu.knob.addEventListener(\"keydown\",this.contextMenuCloseByKey.bind(this));\n    }\n    contextMenuCloseByKey(e){\n      if(e.keyCode==27)\n       this.contextMenuClose();\n    }\n    contextMenuClose(){\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      menu.knob.removeEventListener(\"keydown\",this.contextMenuCloseByKey);\n      menu.classList.remove(\"active\");\n      let menuItemLearn=document.getElementById(\"webaudioctrl-context-menu-learn\");\n      menuItemLearn.innerHTML = 'Learn';\n      menu.knob.midiMode = 'normal';\n    }\n    contextMenuLearn(){\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      let menuItemLearn=document.getElementById(\"webaudioctrl-context-menu-learn\");\n      menuItemLearn.innerHTML = 'Listening...';\n      menu.knob.midiMode = 'learn';\n    }\n    contextMenuClear(e){\n      let menu=document.getElementById(\"webaudioctrl-context-menu\");\n      menu.knob.midiController={};\n      this.contextMenuClose();\n    }\n    preserveMidiLearn(){\n      if(!opt.preserveMidiLearn)\n        return;\n      const v=[];\n      for(let w of this.listOfWidgets) {\n        if(w.id)\n          v.push({\"id\":w.id, \"cc\":w.midiController});\n      }\n      const s=JSON.stringify(v);\n      localStorage.setItem(\"WebAudioControlsMidiLearn\",s);\n    }\n  }\n  if(window.UseWebAudioControlsMidi||opt.useMidi)\n    window.webAudioControlsWidgetManager = window.webAudioControlsMidiManager = new WebAudioControlsWidgetManager();\n}\n"]}